<!doctype html>
<html lang="pt-br">
<head>
    {% load static %}
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GIRO DNC - Nova Despesa Administrativa</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'paginas/css/style.css' %}">
</head>

<body>
  <header class="gd-topbar">
    <div class="gd-logo-container">
      <a href="{% url 'paginas:home' %}">
        <img src="{% static 'paginas/img/Girologo.jpg' %}" alt="Logo Giro" class="gd-logo">
      </a>
    </div>
    <div class="gd-topbar-content">
      <span class="gd-pill">GIRO DNC</span>
    </div>
  </header>

  <div class="sidebar-item">
    <button id="sidebar-toggle" class="menu-sanduiche">
      <i class="bi bi-list"></i>
    </button>
  </div>

  <div class="gd-layout d-flex">
    {% with sidebar_section='admin' sidebar_active='despesas_admin' %}
      {% include 'includes/sidebar.html' %}
    {% endwith %}

    <main class="gd-main">
      <div class="conteudo">
        
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent p-0 mb-2">
            <li class="breadcrumb-item"><a href="{% url 'paginas:despesas_administrativas' %}">Despesas Admin</a></li>
            <li class="breadcrumb-item active" aria-current="page">Nova Despesa</li>
          </ol>
        </nav>

        <div class="mb-4">
          <h1 class="titulo-principal mb-1">
            <i class="bi bi-plus-circle me-2"></i>Nova Despesa Administrativa
          </h1>
          <p class="text-muted">Cadastre uma nova despesa operacional da Giro DNC</p>
        </div>

        <div class="card border-0 shadow-sm">
          <div class="card-body p-4">
            <form method="POST" enctype="multipart/form-data">
              {% csrf_token %}
              
              <div class="row g-3">
                <!-- Nome -->
                <div class="col-md-8">
                  <label for="nome" class="form-label">Nome da Despesa *</label>
                  <input type="text" class="form-control" id="nome" name="nome" required placeholder="Ex: Aluguel Janeiro 2025">
                </div>

                <!-- Categoria -->
                <div class="col-md-4">
                  <label for="categoria" class="form-label">Categoria *</label>
                  <select class="form-select" id="categoria" name="categoria" required>
                    <option value="">Selecione...</option>
                    {% for value, label in categorias %}
                      <option value="{{ value }}">{{ label }}</option>
                    {% endfor %}
                  </select>
                </div>

                <!-- Descrição -->
                <div class="col-12">
                  <label for="descricao" class="form-label">Descrição</label>
                  <textarea class="form-control" id="descricao" name="descricao" rows="3" placeholder="Detalhes sobre a despesa..."></textarea>
                </div>

                <!-- Fornecedor -->
                <div class="col-md-6">
                  <label for="fornecedor" class="form-label">Fornecedor/Beneficiário</label>
                  <input type="text" class="form-control" id="fornecedor" name="fornecedor" placeholder="Nome da empresa ou pessoa">
                </div>

                <!-- Número Documento -->
                <div class="col-md-6">
                  <label for="numero_documento" class="form-label">Nº Documento</label>
                  <input type="text" class="form-control" id="numero_documento" name="numero_documento" placeholder="NF, boleto, recibo...">
                </div>

                <!-- Valores -->
                <div class="col-md-6">
                  <label for="valor_total" class="form-label">Valor Total *</label>
                  <input type="number" step="0.01" class="form-control" id="valor_total" name="valor_total" required placeholder="0.00">
                </div>

                <div class="col-md-6">
                  <label for="valor_pago" class="form-label">Valor Pago</label>
                  <input type="number" step="0.01" class="form-control" id="valor_pago" name="valor_pago" value="0.00" placeholder="0.00">
                </div>

                <!-- Datas -->
                <div class="col-md-6">
                  <label for="data_vencimento" class="form-label">Data Vencimento</label>
                  <input type="date" class="form-control" id="data_vencimento" name="data_vencimento">
                </div>

                <div class="col-md-6">
                  <label for="data_pagamento" class="form-label">Data Pagamento</label>
                  <input type="date" class="form-control" id="data_pagamento" name="data_pagamento">
                </div>

                <!-- Status e Tipo -->
                <div class="col-md-4">
                  <label for="status" class="form-label">Status *</label>
                  <select class="form-select" id="status" name="status" required>
                    {% for value, label in status_choices %}
                      <option value="{{ value }}" {% if value == 'PENDENTE' %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                  </select>
                </div>

                <div class="col-md-4">
                  <label for="tipo_pagamento" class="form-label">Tipo de Pagamento *</label>
                  <select class="form-select" id="tipo_pagamento" name="tipo_pagamento" required>
                    {% for value, label in tipos_pagamento %}
                      <option value="{{ value }}" {% if value == 'UNICO' %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                  </select>
                </div>

                <div class="col-md-4">
                  <label for="forma_pagamento" class="form-label">Forma de Pagamento</label>
                  <select class="form-select" id="forma_pagamento" name="forma_pagamento">
                    <option value="">Selecione...</option>
                    {% for value, label in formas_pagamento %}
                      <option value="{{ value }}">{{ label }}</option>
                    {% endfor %}
                  </select>
                </div>

                <!-- Parcelamento -->
                <div class="col-md-6">
                  <label for="numero_parcelas" class="form-label">Número de Parcelas</label>
                  <input type="number" class="form-control" id="numero_parcelas" name="numero_parcelas" placeholder="Deixe em branco se não for parcelado">
                </div>

                <div class="col-md-6">
                  <label for="parcela_atual" class="form-label">Parcela Atual</label>
                  <input type="number" class="form-control" id="parcela_atual" name="parcela_atual" placeholder="Ex: 1">
                </div>

                <!-- Comprovante -->
                <div class="col-12">
                  <label for="comprovante" class="form-label">Comprovante de Pagamento</label>
                  <input type="file" class="form-control" id="comprovante" name="comprovante" accept=".pdf,.jpg,.jpeg,.png">
                  <small class="text-muted">Formatos aceitos: PDF, JPG, PNG</small>
                </div>

                <!-- Observações -->
                <div class="col-12">
                  <label for="observacoes" class="form-label">Observações</label>
                  <textarea class="form-control" id="observacoes" name="observacoes" rows="3" placeholder="Anotações adicionais, lembretes..."></textarea>
                </div>

                <!-- Botões -->
                <div class="col-12 mt-4">
                  <div class="d-flex justify-content-between">
                    <a href="{% url 'paginas:despesas_administrativas' %}" class="btn btn-outline-secondary">
                      <i class="bi bi-arrow-left me-2"></i>Voltar
                    </a>
                    <button type="submit" class="btn btn-primary btn-lg">
                      <i class="bi bi-check-circle me-2"></i>Salvar Despesa
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>

      </div>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{% static 'paginas/js/sidebar.js' %}"></script>
</body>
</html>
